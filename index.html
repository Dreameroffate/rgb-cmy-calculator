<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RGB ‚Üî CMY % Calculator</title>

  <!-- Base styles (–∑ —Ç–≤–æ—î—ó –≤–µ—Ä—Å—ñ—ó) -->
  <style>
    :root{
      --bg:#0b0814; --panel:#120f21; --panel-2:#0f0c1c; --text:#efe7ff; --muted:#b9a8e6; --accent:#8b5cf6; --ok:#22c55e; --warn:#f59e0b;
      --radius:16px;
    }
    *{box-sizing:border-box}
    html,body{
      margin:0; font-family:system-ui,-apple-system,"Segoe UI",Roboto,Ubuntu,"Helvetica Neue",Arial; color:var(--text);
      background:radial-gradient(1200px 700px at 15% -10%, rgba(139,92,246,.25), transparent 60%),
                 radial-gradient(900px 600px at 85% 10%, rgba(236,72,153,.15), transparent 60%),
                 linear-gradient(180deg,#0a0713 0%, #0c0a18 100%);
    }
    body{
      margin:0; font-family:system-ui,-apple-system,"Segoe UI",Roboto,Ubuntu,"Helvetica Neue",Arial; color:var(--text); background:linear-gradient(180deg,#0b0f14 0%, #0b1220 100%);
    }
    .container{max-width:1100px; margin:0 auto; padding:20px;}
    header{
      display:flex; flex-wrap:wrap; gap:14px; align-items:center; justify-content:space-between; margin-bottom:16px;
    }
    .title{font-size:clamp(20px,2.6vw,28px); font-weight:700; letter-spacing:.2px}
    .subtitle{color:var(--muted); font-size:14px}

    .grid{display:grid; grid-template-columns:1.1fr 1fr; gap:16px}
    @media (max-width:900px){.grid{grid-template-columns:1fr}}

    .card{background:linear-gradient(180deg,var(--panel) 0%, var(--panel-2) 100%); border:1px solid #1f2937; border-radius:var(--radius); padding:16px; box-shadow:0 6px 24px rgba(0,0,0,.35)}
    .card h2{margin:0 0 10px 0; font-size:18px}

    .preview{height:220px; border-radius:14px; border:1px solid #1f2937}
    .row{display:grid; grid-template-columns:90px 1fr 90px; gap:10px; align-items:center; margin:10px 0}
    .row label{font-weight:600}
    input[type="range"]{width:100%}
    input[type="number"], input[type="text"]{
      width:100%; background:#0b1220; border:1px solid #253244; color:var(--text); padding:10px 12px; border-radius:10px; font-size:14px;
    }
    .badge{display:inline-flex; gap:8px; align-items:center; padding:6px 10px; background:#0b1220; border:1px solid #243140; border-radius:999px; font-size:12px; color:var(--muted)}

    .inline{display:flex; gap:10px; flex-wrap:wrap}
    .btn{cursor:pointer; border:1px solid #243140; background:#0b1220; color:var(--text); padding:10px 12px; border-radius:10px; font-weight:600; font-size:14px}
    .btn:hover{filter:brightness(1.06)}
    .btn:active{transform:translateY(1px)}

    .swatches{display:grid; grid-template-columns:repeat(auto-fill,minmax(130px,1fr)); gap:10px}
    .swatch{display:flex; gap:10px; align-items:center; border:1px solid #243140; padding:8px; border-radius:12px; background:#0b1220}
    .dot{width:28px; height:28px; border-radius:8px; border:1px solid #1f2937}
    .swatch span{font-size:14px}

    .two-col{display:grid; grid-template-columns:1fr 1fr; gap:10px}
    @media (max-width:600px){.two-col{grid-template-columns:1fr}}

    .helper{font-size:12px; color:var(--muted)}
    .labelline{display:flex; align-items:center; justify-content:space-between; gap:10px}
    .tabs{display:flex; gap:8px; margin:10px 0 6px 0}
    .tab{cursor:pointer; padding:8px 12px; border-radius:10px; border:1px solid #243140; background:#0b1220; color:var(--text); font-weight:600; font-size:14px}
    .tab.active{outline:2px solid var(--accent); box-shadow:0 0 0 4px rgba(59,130,246,.15)}
    .hidden{display:none}
  </style>

  <!-- –¢–≤–æ—ó –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ñ —Å—Ç–∏–ª—ñ -->
  <style>
    .neon{ text-shadow:0 0 8px rgba(139,92,246,.9), 0 0 18px rgba(168,85,247,.6); }
    .holo{ position:relative; isolation:isolate; }
    .holo::before{ content:""; position:absolute; inset:-1px; z-index:-1; border-radius:14px; padding:1px; background:linear-gradient(135deg,#a78bfa, #22d3ee, #fb7185, #a78bfa); -webkit-mask:linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); -webkit-mask-composite:xor; mask-composite:exclude;}
  </style>

  <!-- –ü–µ—Ä–µ–º–∏–∫–∞—á —Å–≤—ñ—Ç–ª–æ—ó —Ç–µ–º–∏ -->
  <style>
    :root[data-theme="light"]{
      --bg:#ffffff;
      --panel:#f8fafc;
      --panel-2:#eef2f7;
      --text:#0b1220;
      --muted:#4b5563;
      --accent:#7c3aed;
    }
    :root[data-theme="light"] body{
      background:none !important;
      background:#f5f7fb !important;
    }
    :root[data-theme="light"] .card,
    :root[data-theme="light"] .badge,
    :root[data-theme="light"] header,
    :root[data-theme="light"] .swatch,
    :root[data-theme="light"] .btn{
      background-color: rgba(255,255,255,0.85) !important;
      border: 1px solid rgba(0,0,0,0.06) !important;
      backdrop-filter: blur(4px) !important;
    }
    :root[data-theme="light"] body::before{
      background: rgba(255,255,255,0.25);
      backdrop-filter: blur(4px);
    }
  </style>

  <!-- –ü–∞—Ç—á —Ñ–æ–Ω—É: –≤–∏–º–∫–Ω. –≥—Ä–∞–¥—ñ—î–Ω—Ç–∏ + –≤–ª–∞—Å–Ω–∏–π –±–µ–∫–≥—Ä–∞—É–Ω–¥ –∑ –±–ª—é—Ä–æ–º -->
  <style>
    html, body { background: none !important; }
    body{
      background: url('background.jpg?v=3') no-repeat center center fixed !important;
      background-size: cover !important;
      position: relative;
    }
    body::before{
      content:""; position:fixed; inset:0;
      background: rgba(0,0,0,0.35);
      backdrop-filter: blur(8px);
      pointer-events:none; z-index:0;
    }
    .container, header, .card, .badge, .swatch, .btn, #brandFooter { position:relative; z-index:1; }
  </style>

  <style>
/* --- LIGHT THEME FIXES: –∫—Ä–∞—â–∏–π –∫–æ–Ω—Ç—Ä–∞—Å—Ç –¥–ª—è —Å–≤—ñ—Ç–ª–æ—ó —Ç–µ–º–∏ --- */

/* –°–≤—ñ—Ç–ª—ñ —ñ–Ω–ø—É—Ç–∏ */
:root[data-theme="light"] input[type="number"],
:root[data-theme="light"] input[type="text"]{
  background:#ffffff !important;
  color:#0b1220 !important;
  border:1px solid #d0d7e2 !important;
  box-shadow:none !important;
}

/* –°–≤—ñ—Ç–ª—ñ —Ç–∞–±–∏/–∫–Ω–æ–ø–∫–∏/–±–µ–π–¥–∂—ñ/–ø—Ä–µ—Å–µ—Ç–∏ */
:root[data-theme="light"] .tab,
:root[data-theme="light"] .btn,
:root[data-theme="light"] .badge,
:root[data-theme="light"] .swatch{
  background:#ffffff !important;
  color:#0b1220 !important;
  border:1px solid #d0d7e2 !important;
}
:root[data-theme="light"] .tab.active{
  outline:2px solid var(--accent) !important;
  box-shadow:0 0 0 4px rgba(124,58,237,.12) !important;
}

/* –ö–∞—Ä—Ç–æ—á–∫–∏/–∑–∞–≥–æ–ª–æ–≤–∫–∏/–ø—Ä–µ–≤‚Äô—é/—Ç–æ—á–∫–∏ */
:root[data-theme="light"] .card h2{ color:#0b1220 !important; }
:root[data-theme="light"] .preview{ border-color:#d1d5db !important; }
:root[data-theme="light"] .dot{ border-color:#e5e7eb !important; }

/* –ü—ñ–¥–ø–∏—Å–∏ —Ç–∞ –ª–µ–π–±–ª–∏ */
:root[data-theme="light"] .helper{ color:#6b7280 !important; }
:root[data-theme="light"] .row label{ color:#0b1220 !important; }

/* –°–ª–∞–π–¥–µ—Ä–∏ (track + thumb) */
:root[data-theme="light"] input[type="range"]{
  -webkit-appearance:none; appearance:none;
  height:6px; width:100%;
  background:#e5e7eb; border-radius:999px; outline:none;
}
:root[data-theme="light"] input[type="range"]::-webkit-slider-thumb{
  -webkit-appearance:none; appearance:none;
  width:16px; height:16px; border-radius:50%;
  background:var(--accent); border:2px solid #ffffff;
  box-shadow:0 1px 2px rgba(0,0,0,.25);
  margin-top:-5px; /* —Ü–µ–Ω—Ç—Ä—É—î –ø—ñ–ø–∫—É */
}
:root[data-theme="light"] input[type="range"]::-moz-range-thumb{
  width:16px; height:16px; border-radius:50%;
  background:var(--accent); border:2px solid #ffffff;
  box-shadow:0 1px 2px rgba(0,0,0,.25);
}
:root[data-theme="light"] input[type="range"]::-moz-range-track{
  height:6px; background:#e5e7eb; border-radius:999px;
}

/* –õ–µ–≥—à–∏–π overlay —É —Å–≤—ñ—Ç–ª—ñ–π —Ç–µ–º—ñ */
:root[data-theme="light"] body::before{
  background: rgba(255,255,255,0.18) !important;
  backdrop-filter: blur(4px) !important;
}
</style>


  
</head>

<body>
  <div class="container">
    <!-- –ü—Ä–æ—Å—Ç–∏–π —Ñ—É—Ç–µ—Ä, —è–∫ —Ç–∏ –ø—Ä–æ—Å–∏–≤ -->
    <div class="footer-brand holo" id="brandFooter" style="position:fixed; bottom:0; left:0; width:100%; z-index:10; display:flex; justify-content:center; align-items:center; gap:12px; padding:10px 12px; border-top:1px solid #2a1f47; background:linear-gradient(180deg,var(--panel) 0%,var(--panel-2) 100%); box-shadow:0 -4px 20px rgba(139,92,246,.25);">
      <div class="neon" id="brandTextLabel" style="font-weight:800; letter-spacing:.3px">Powered by Ihor Matviienko</div>
    </div>

    <header>
      <div>
        <div class="title" data-i18n="title">RGB ‚Üî CMY % Calculator</div>

      </div>
      <div class="inline">
        <div class="badge" id="readout">RGB 0,0,0 ‚Ä¢ HEX #000000 ‚Ä¢ CMY 100%,100%,100%</div>
        <button class="btn" id="themeToggle" title="Toggle theme">üåó Theme</button>
        <button class="btn" id="langToggle" title="Language">UA / EN</button>
      </div>
    </header>

    <div class="grid">
      <section class="card">
        <h2 data-i18n="preview_title">–ü–µ—Ä–µ–≥–ª—è–¥ –∫–æ–ª—å–æ—Ä—É</h2>
        <div id="preview" class="preview"></div>
        <div class="inline" style="margin-top:12px">
          <input id="hex" type="text" inputmode="text" placeholder="#RRGGBB" value="#000000" aria-label="HEX" />
          <button class="btn" id="copyHex" data-i18n="copy_hex">–ö–æ–ø—ñ—é–≤–∞—Ç–∏ HEX</button>
          <button class="btn" id="copyRGB" data-i18n="copy_rgb">–ö–æ–ø—ñ—é–≤–∞—Ç–∏ RGB</button>
          <button class="btn" id="copyCMY" data-i18n="copy_cmy">–ö–æ–ø—ñ—é–≤–∞—Ç–∏ CMY%</button>
        </div>
        <div class="helper" style="margin-top:6px" data-i18n="hex_hint">–í–≤–µ–¥–∏ HEX (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, #1ED3FF) —ñ –Ω–∞—Ç–∏—Å–Ω–∏ Enter ‚Äî –æ–Ω–æ–≤–∏—Ç—å—Å—è –≤—Å–µ.</div>
      </section>

      <section class="card">
        <h2 data-i18n="presets">–ü—Ä–µ—Å–µ—Ç–∏</h2>
        <div class="swatches" id="swatches"></div>
      </section>

      <section class="card">
        <h2 data-i18n="rgb_cmy_tabs">RGB / CMY</h2>

        <div class="tabs">
          <button class="tab active" id="rgbTabBtn" data-i18n="tab_rgb">RGB</button>
          <button class="tab" id="cmyTabBtn" data-i18n="tab_cmy">CMY</button>
        </div>

        <!-- RGB Pane -->
        <div id="paneRGB">
          <div class="row">
            <label for="rRange">R</label>
            <input id="rRange" type="range" min="0" max="255" value="0" />
            <input id="rNum" type="number" min="0" max="255" value="0" />
          </div>
          <div class="row">
            <label for="gRange">G</label>
            <input id="gRange" type="range" min="0" max="255" value="0" />
            <input id="gNum" type="number" min="0" max="255" value="0" />
          </div>
          <div class="row">
            <label for="bRange">B</label>
            <input id="bRange" type="range" min="0" max="255" value="0" />
            <input id="bNum" type="number" min="0" max="255" value="0" />
          </div>

          <div class="two-col" style="margin-top:10px">
            <div>
              <div class="labelline"><label data-i18n="rgb_percent_label">% –∫–∞–Ω–∞–ª—ñ–≤ (0‚Äì100)</label><span class="helper" data-i18n="rgb_percent_hint">–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑ RGB –∞–±–æ —Ä–µ–¥–∞–≥—É–π –Ω–∞–ø—Ä—è–º—É</span></div>
              <div class="row">
                <label>R%</label>
                <input id="rPerc" type="range" min="0" max="100" value="0" />
                <input id="rPercNum" type="number" min="0" max="100" value="0" />
              </div>
              <div class="row">
                <label>G%</label>
                <input id="gPerc" type="range" min="0" max="100" value="0" />
                <input id="gPercNum" type="number" min="0" max="100" value="0" />
              </div>
              <div class="row">
                <label>B%</label>
                <input id="bPerc" type="range" min="0" max="100" value="0" />
                <input id="bPercNum" type="number" min="0" max="100" value="0" />
              </div>
            </div>

            <div>
              <div class="labelline"><label data-i18n="cmy_design_label">CMY –≤—ñ–¥—Å–æ—Ç–∫–∏ (—Ä–µ–∂–∏–º: –î–∏–∑–∞–π–Ω)</label><span class="helper" data-i18n="cmy_design_hint">–†–µ–¥–∞–≥—É—é—Ç—å—Å—è: RGB% = 100% ‚àí CMY%</span></div>
              <div class="row">
                <label>C%</label>
                <input id="cPerc" type="range" min="0" max="100" value="100" />
                <input id="cPercNum" type="number" min="0" max="100" value="100" />
              </div>
              <div class="row">
                <label>M%</label>
                <input id="mPerc" type="range" min="0" max="100" value="100" />
                <input id="mPercNum" type="number" min="0" max="100" value="100" />
              </div>
              <div class="row">
                <label>Y%</label>
                <input id="yPerc" type="range" min="0" max="100" value="100" />
                <input id="yPercNum" type="number" min="0" max="100" value="100" />
              </div>
            </div>
          </div>
        </div>

        <!-- CMY Pane -->
        <div id="paneCMY" class="hidden">
          <div class="two-col">
            <div>
              <div class="labelline"><label data-i18n="cmy_255_label">CMY (0‚Äì255)</label><span class="helper" data-i18n="cmy_255_hint">–†–µ–¥–∞–≥—É–π C/M/Y —è–∫ —É RGB ‚Äî –ø–æ–≤–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å</span></div>
              <div class="row">
                <label>C</label>
                <input id="cRange255" type="range" min="0" max="255" value="100" />
                <input id="cNum255" type="number" min="0" max="255" value="100" />
              </div>
              <div class="row">
                <label>M</label>
                <input id="mRange255" type="range" min="0" max="255" value="100" />
                <input id="mNum255" type="number" min="0" max="255" value="100" />
              </div>
              <div class="row">
                <label>Y</label>
                <input id="yRange255" type="range" min="0" max="255" value="100" />
                <input id="yNum255" type="number" min="0" max="255" value="100" />
              </div>

              <div class="labelline" style="margin-top:10px"><label>CMY % (0‚Äì100)</label><span class="helper" data-i18n="cmy_percent_hint">–î–≤–æ—Å—Ç–æ—Ä–æ–Ω–Ω—å–æ –∑ 0‚Äì255</span></div>
              <div class="row">
                <label>C%</label>
                <input id="cPerc2" type="range" min="0" max="100" value="39" />
                <input id="cPercNum2" type="number" min="0" max="100" value="39" />
              </div>
              <div class="row">
                <label>M%</label>
                <input id="mPerc2" type="range" min="0" max="100" value="39" />
                <input id="mPercNum2" type="number" min="0" max="100" value="39" />
              </div>
              <div class="row">
                <label>Y%</label>
                <input id="yPerc2" type="range" min="0" max="100" value="39" />
                <input id="yPercNum2" type="number" min="0" max="100" value="39" />
              </div>
            </div>
            <div>
              <div class="labelline"><label data-i18n="current_rgb">–ü–æ—Ç–æ—á–Ω—ñ RGB</label><span class="helper" data-i18n="auto_from_cmy">–ê–≤—Ç–æ –∑ CMY</span></div>
              <div class="row">
                <label>R</label>
                <input id="rNumView" type="number" min="0" max="255" value="0" disabled />
                <input id="rPercView" type="number" min="0" max="100" value="0" disabled />
              </div>
              <div class="row">
                <label>G</label>
                <input id="gNumView" type="number" min="0" max="255" value="0" disabled />
                <input id="gPercView" type="number" min="0" max="100" value="0" disabled />
              </div>
              <div class="row">
                <label>B</label>
                <input id="bNumView" type="number" min="0" max="255" value="0" disabled />
                <input id="bPercView" type="number" min="0" max="100" value="0" disabled />
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="card">
        <h2 data-i18n="help">–î–æ–≤—ñ–¥–∫–∞</h2>
        <p class="helper" data-i18n="help_text">% –æ–±—á–∏—Å–ª—é—î—Ç—å—Å—è —è–∫ <strong>(–∑–Ω–∞—á–µ–Ω–Ω—è / 255) √ó 100</strong>. CMY% = 100% ‚àí RGB% (—Å—É–±—Ç—Ä–∞–∫—Ç–∏–≤–Ω–∞ –º–æ–¥–µ–ª—å). –ù–∞—Ç–∏—Å–∫–∞–π –Ω–∞ –ø—Ä–µ—Å–µ—Ç–∏, —Ä—É—Ö–∞–π —Å–ª–∞–π–¥–µ—Ä–∏ –∞–±–æ –≤–≤–æ–¥—å HEX. –¢–µ–º—É –æ—Ñ–æ—Ä–º–ª–µ–Ω–æ —É —Ñ—ñ–æ–ª–µ—Ç–æ–≤–æ–º—É –Ω–µ–æ–Ω-—Å—Ç–∏–ª—ñ.</p>
        <div class="inline">
          <button class="btn" id="reset" data-i18n="reset">–°–∫–∏–Ω—É—Ç–∏</button>
          <button class="btn" id="random" data-i18n="random">–í–∏–ø–∞–¥–∫–æ–≤–∏–π –∫–æ–ª—ñ—Ä</button>
        </div>
      </section>
    </div>
  </div>

  <!-- –õ–û–ì–Ü–ö–ê -->
  <script>
    const clamp=(n,min,max)=>Math.min(Math.max(n,min),max);
    const toHex=v=>v.toString(16).padStart(2,'0').toUpperCase();
    const hexToRgb = (hex)=>{
      const m = /^#?([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i.exec(hex.trim());
      if(!m) return null; return {r:parseInt(m[1],16), g:parseInt(m[2],16), b:parseInt(m[3],16)};
    };

    // Elements
    const preview = document.getElementById('preview');
    const readout = document.getElementById('readout');
    const hexInput = document.getElementById('hex');

    const rRange = document.getElementById('rRange');
    const gRange = document.getElementById('gRange');
    const bRange = document.getElementById('bRange');
    const rNum = document.getElementById('rNum');
    const gNum = document.getElementById('gNum');
    const bNum = document.getElementById('bNum');

    const rPerc = document.getElementById('rPerc');
    const gPerc = document.getElementById('gPerc');
    const bPerc = document.getElementById('bPerc');
    const rPercNum = document.getElementById('rPercNum');
    const gPercNum = document.getElementById('gPercNum');
    const bPercNum = document.getElementById('bPercNum');

    const cPerc = document.getElementById('cPerc');
    const mPerc = document.getElementById('mPerc');
    const yPerc = document.getElementById('yPerc');
    const cPercNum = document.getElementById('cPercNum');
    const mPercNum = document.getElementById('mPercNum');
    const yPercNum = document.getElementById('yPercNum');

    const copyHexBtn = document.getElementById('copyHex');
    const copyRGBBtn = document.getElementById('copyRGB');
    const copyCMYBtn = document.getElementById('copyCMY');

    const resetBtn = document.getElementById('reset');
    const randomBtn = document.getElementById('random');

    // State
    let R=0,G=0,B=0; let lock=false;

    function rgbToPercent(v){return Math.round((v/255)*100);} // 0-100
    function percentToRgb(p){return Math.round((clamp(p,0,100)/100)*255);} // 0-255

    function updateUI(){
      lock=true;
      // range + numbers
      rRange.value=R; gRange.value=G; bRange.value=B;
      rNum.value=R; gNum.value=G; bNum.value=B;
      // %
      const rP=rgbToPercent(R), gP=rgbToPercent(G), bP=rgbToPercent(B);
      rPerc.value=rP; gPerc.value=gP; bPerc.value=bP;
      rPercNum.value=rP; gPercNum.value=gP; bPercNum.value=bP;
      // CMY% = 100 - RGB%
      const cP=100-rP, mP=100-gP, yP=100-bP;
      cPerc.value=cP; mPerc.value=mP; yPerc.value=yP;
      cPercNum.value=cP; mPercNum.value=mP; yPercNum.value=yP;

      // Preview + hex + readout
      const hex = `#${toHex(R)}${toHex(G)}${toHex(B)}`;
      preview.style.background = hex;
      hexInput.value = hex;
      readout.textContent = `RGB ${R},${G},${B} ‚Ä¢ HEX ${hex} ‚Ä¢ CMY ${cP}%,${mP}%,${yP}%`;
      lock=false;
    }

    function setRGB(r,g,b){
      R=clamp(Math.round(r),0,255); G=clamp(Math.round(g),0,255); B=clamp(Math.round(b),0,255);
      updateUI();
      syncViews();
    }

    function fromHex(){
      const rgb = hexToRgb(hexInput.value);
      if(rgb){ setRGB(rgb.r, rgb.g, rgb.b); }
    }

    // Listeners RGB number/range
    [rRange,gRange,bRange].forEach((el,i)=>{
      el.addEventListener('input',()=>{ if(lock) return; const vals=[R,G,B]; vals[i]=+el.value; setRGB(vals[0],vals[1],vals[2]); });
    });
    [rNum,gNum,bNum].forEach((el,i)=>{
      el.addEventListener('input',()=>{ if(lock) return; const vals=[R,G,B]; vals[i]=+el.value; setRGB(vals[0],vals[1],vals[2]); });
    });

    // Percent bi-directional (RGB% editable)
    ;[[rPerc, rPercNum, 0],[gPerc, gPercNum, 1],[bPerc, bPercNum, 2]].forEach(([range,num,idx])=>{
      const handler = (src)=>()=>{ if(lock) return; const p = +src.value; const vals=[R,G,B]; vals[idx]=percentToRgb(p); setRGB(vals[0],vals[1],vals[2]); };
      range.addEventListener('input', handler(range));
      num.addEventListener('input', handler(num));
    });

    // Percent bi-directional (CMY% editable)
    ;[[cPerc, cPercNum, 0],[mPerc, mPercNum, 1],[yPerc, yPercNum, 2]].forEach(([range,num,idx])=>{
      const handler = (src)=>()=>{ if(lock) return; const cmyP = +src.value; // 0..100
        const rgbP = 100 - clamp(cmyP,0,100); // RGB% = 100 - CMY%
        const vals=[R,G,B]; vals[idx]=percentToRgb(rgbP); setRGB(vals[0],vals[1],vals[2]); };
      range.addEventListener('input', handler(range));
      num.addEventListener('input', handler(num));
    });

    // HEX input
    hexInput.addEventListener('keydown',e=>{ if(e.key==='Enter') fromHex(); });
    hexInput.addEventListener('blur', fromHex);

    // Copy buttons
    async function copy(text){ try{ await navigator.clipboard.writeText(text); const t=event?.target; if(t){ t.textContent=t.dataset.label||t.textContent; t.textContent='‚úì'; setTimeout(()=>t.textContent=t.dataset.label||'–ö–æ–ø—ñ—é–≤–∞—Ç–∏',900);} }catch(e){ /* ignore */ } }
    copyHexBtn.dataset.label='–ö–æ–ø—ñ—é–≤–∞—Ç–∏ HEX';
    copyRGBBtn.dataset.label='–ö–æ–ø—ñ—é–≤–∞—Ç–∏ RGB';
    copyCMYBtn.dataset.label='–ö–æ–ø—ñ—é–≤–∞—Ç–∏ CMY%';

    copyHexBtn.addEventListener('click',()=> copy(hexInput.value));
    copyRGBBtn.addEventListener('click',()=> copy(`rgb(${R}, ${G}, ${B})`));
    copyCMYBtn.addEventListener('click',()=>{
      const rP=rgbToPercent(R), gP=rgbToPercent(G), bP=rgbToPercent(B);
      const cP=100-rP, mP=100-gP, yP=100-bP;
      copy(`CMY ${cP}%, ${mP}%, ${yP}%`);
    });

    // Reset + Random
    resetBtn.addEventListener('click',()=> setRGB(0,0,0));
    randomBtn.addEventListener('click',()=> setRGB(Math.random()*255, Math.random()*255, Math.random()*255));

    // Presets
    const presets=[
      {name:'White', rgb:[255,255,255]},
      {name:'Black', rgb:[0,0,0]},
      {name:'Red', rgb:[255,0,0]},
      {name:'Green', rgb:[0,255,0]},
      {name:'Blue', rgb:[0,0,255]},
      {name:'Yellow', rgb:[255,255,0]},
      {name:'Cyan', rgb:[0,255,255]},
      {name:'Magenta', rgb:[255,0,255]},
      {name:'Orange', rgb:[255,165,0]},
      {name:'Light Blue', rgb:[135,206,235]},
      {name:'Tiffany', rgb:[10,186,181]},
    ];
    const swWrap=document.getElementById('swatches');
    presets.forEach(p=>{
      const el=document.createElement('button'); el.className='swatch btn'; el.style.padding='8px 10px'; el.type='button';
      const dot=document.createElement('div'); dot.className='dot'; dot.style.background=`rgb(${p.rgb.join(',')})`;
      const label=document.createElement('span'); label.textContent=p.name;
      el.appendChild(dot); el.appendChild(label); swWrap.appendChild(el);
      el.addEventListener('click',()=> setRGB(...p.rgb));
    });

    // Tabs
    const rgbTabBtn=document.getElementById('rgbTabBtn');
    const cmyTabBtn=document.getElementById('cmyTabBtn');
    const paneRGB=document.getElementById('paneRGB');
    const paneCMY=document.getElementById('paneCMY');
    function setTab(tab){
      if(tab==='rgb'){
        rgbTabBtn.classList.add('active'); cmyTabBtn.classList.remove('active');
        paneRGB.classList.remove('hidden'); paneCMY.classList.add('hidden');
      }else{
        cmyTabBtn.classList.add('active'); rgbTabBtn.classList.remove('active');
        paneCMY.classList.remove('hidden'); paneRGB.classList.add('hidden');
      }
    }
    rgbTabBtn?.addEventListener('click',()=>setTab('rgb'));
    cmyTabBtn?.addEventListener('click',()=>setTab('cmy'));

    // === THEME TOGGLE ===
    (function(){
      const root = document.documentElement;
      const saved = localStorage.getItem('theme');
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      const initial = saved || (prefersDark ? 'dark' : 'light');
      if(initial === 'light') root.setAttribute('data-theme','light');
      const btn = document.getElementById('themeToggle');
      btn?.addEventListener('click', ()=>{
        const isLight = root.getAttribute('data-theme') === 'light';
        if(isLight){ root.removeAttribute('data-theme'); localStorage.setItem('theme','dark'); }
        else { root.setAttribute('data-theme','light'); localStorage.setItem('theme','light'); }
      });
    })();

    // === I18N (UA/EN) ===
    const I18N = {
      ua: {
        title: "RGB ‚Üî CMY % Calculator",
        subtitle: "–ú–æ–±—ñ–ª—å–Ω–∏–π & –ü–ö. –í–≤–æ–¥—å 0‚Äì255 –∞–±–æ %. –û—Ç—Ä–∏–º—É–π HEX, RGB, CMY —Ç–∞ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –ø–µ—Ä–µ–≥–ª—è–¥.",
        preview_title: "–ü–µ—Ä–µ–≥–ª—è–¥ –∫–æ–ª—å–æ—Ä—É",
        copy_hex: "–ö–æ–ø—ñ—é–≤–∞—Ç–∏ HEX",
        copy_rgb: "–ö–æ–ø—ñ—é–≤–∞—Ç–∏ RGB",
        copy_cmy: "–ö–æ–ø—ñ—é–≤–∞—Ç–∏ CMY%",
        presets: "–ü—Ä–µ—Å–µ—Ç–∏",
        rgb_cmy_tabs: "RGB / CMY",
        tab_rgb: "RGB",
        tab_cmy: "CMY",
        help: "–î–æ–≤—ñ–¥–∫–∞",
        help_text: "% –æ–±—á–∏—Å–ª—é—î—Ç—å—Å—è —è–∫ <strong>(–∑–Ω–∞—á–µ–Ω–Ω—è / 255) √ó 100</strong>. CMY% = 100% ‚àí RGB% (—Å—É–±—Ç—Ä–∞–∫—Ç–∏–≤–Ω–∞ –º–æ–¥–µ–ª—å). –ù–∞—Ç–∏—Å–∫–∞–π –Ω–∞ –ø—Ä–µ—Å–µ—Ç–∏, —Ä—É—Ö–∞–π —Å–ª–∞–π–¥–µ—Ä–∏ –∞–±–æ –≤–≤–æ–¥—å HEX. –¢–µ–º—É –æ—Ñ–æ—Ä–º–ª–µ–Ω–æ —É —Ñ—ñ–æ–ª–µ—Ç–æ–≤–æ–º—É –Ω–µ–æ–Ω-—Å—Ç–∏–ª—ñ.",
        reset: "–°–∫–∏–Ω—É—Ç–∏",
        random: "–í–∏–ø–∞–¥–∫–æ–≤–∏–π –∫–æ–ª—ñ—Ä",
        rgb_percent_label: "% –∫–∞–Ω–∞–ª—ñ–≤ (0‚Äì100)",
        rgb_percent_hint: "–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑ RGB –∞–±–æ —Ä–µ–¥–∞–≥—É–π –Ω–∞–ø—Ä—è–º—É",
        cmy_design_label: "CMY –≤—ñ–¥—Å–æ—Ç–∫–∏ (—Ä–µ–∂–∏–º: –î–∏–∑–∞–π–Ω)",
        cmy_design_hint: "–†–µ–¥–∞–≥—É—é—Ç—å—Å—è: RGB% = 100% ‚àí CMY%",
        cmy_255_label: "CMY (0‚Äì255)",
        cmy_255_hint: "–†–µ–¥–∞–≥—É–π C/M/Y —è–∫ —É RGB ‚Äî –ø–æ–≤–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å",
        current_rgb: "–ü–æ—Ç–æ—á–Ω—ñ RGB",
        auto_from_cmy: "–ê–≤—Ç–æ –∑ CMY",
        cmy_percent_hint: "–î–≤–æ—Å—Ç–æ—Ä–æ–Ω–Ω—å–æ –∑ 0‚Äì255"
      },
      en: {
        title: "RGB ‚Üî CMY % Calculator",
        subtitle: "Mobile & Desktop. Enter 0‚Äì255 or %. Get HEX, RGB, CMY and preview.",
        preview_title: "Color preview",
        copy_hex: "Copy HEX",
        copy_rgb: "Copy RGB",
        copy_cmy: "Copy CMY%",
        presets: "Presets",
        rgb_cmy_tabs: "RGB / CMY",
        tab_rgb: "RGB",
        tab_cmy: "CMY",
        help: "Help",
        help_text: "% is computed as <strong>(value / 255) √ó 100</strong>. CMY% = 100% ‚àí RGB% (subtractive model). Use presets, sliders or type HEX. Styled in violet neon.",
        reset: "Reset",
        random: "Random color",
        rgb_percent_label: "% channels (0‚Äì100)",
        rgb_percent_hint: "Auto from RGB or edit directly",
        cmy_design_label: "CMY percentages (Design mode)",
        cmy_design_hint: "Editable: RGB% = 100% ‚àí CMY%",
        cmy_255_label: "CMY (0‚Äì255)",
        cmy_255_hint: "Edit C/M/Y like RGB ‚Äî full control",
        current_rgb: "Current RGB",
        auto_from_cmy: "Auto from CMY",
        cmy_percent_hint: "Two-way with 0‚Äì255"
      }
    };
    (function(){
      const LANG_KEY = 'lang';
      const langBtn = document.getElementById('langToggle');
      let lang = localStorage.getItem(LANG_KEY) || 'ua';

      function applyLang(l){
        document.querySelectorAll('[data-i18n]').forEach(el=>{
          const key = el.getAttribute('data-i18n');
          let val = (I18N[l] && I18N[l][key]);
          if(typeof val === 'undefined'){ return; }
          // —è–∫—â–æ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ —î <strong> ‚Äî –º–æ–∂–Ω–∞ –≤—Å—Ç–∞–≤–∏—Ç–∏ —è–∫ HTML —Ç—ñ–ª—å–∫–∏ –¥–ª—è help_text
          if(key === 'help_text'){ el.innerHTML = val; }
          else { el.textContent = val; }
        });
        localStorage.setItem(LANG_KEY, l);
        if(langBtn) langBtn.textContent = (l === 'ua') ? 'UA / EN' : 'EN / UA';
        // –ü—ñ–¥–ø–∏—Å–∏ –∫–Ω–æ–ø–æ–∫ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è
        const copyHexBtn = document.getElementById('copyHex');
        const copyRGBBtn = document.getElementById('copyRGB');
        const copyCMYBtn = document.getElementById('copyCMY');
        if(copyHexBtn) copyHexBtn.dataset.label = I18N[l].copy_hex;
        if(copyRGBBtn) copyRGBBtn.dataset.label = I18N[l].copy_rgb;
        if(copyCMYBtn) copyCMYBtn.dataset.label = I18N[l].copy_cmy;
      }

      applyLang(lang);
      langBtn?.addEventListener('click', ()=>{
        lang = (lang === 'ua') ? 'en' : 'ua';
        applyLang(lang);
      });
    })();

    // CMY pane bindings (0‚Äì255 and %)
    const cRange255=document.getElementById('cRange255');
    const mRange255=document.getElementById('mRange255');
    const yRange255=document.getElementById('yRange255');
    const cNum255=document.getElementById('cNum255');
    const mNum255=document.getElementById('mNum255');
    const yNum255=document.getElementById('yNum255');

    const cPerc2=document.getElementById('cPerc2');
    const mPerc2=document.getElementById('mPerc2');
    const yPerc2=document.getElementById('yPerc2');
    const cPercNum2=document.getElementById('cPercNum2');
    const mPercNum2=document.getElementById('mPercNum2');
    const yPercNum2=document.getElementById('yPercNum2');

    const rNumView=document.getElementById('rNumView');
    const gNumView=document.getElementById('gNumView');
    const bNumView=document.getElementById('bNumView');
    const rPercView=document.getElementById('rPercView');
    const gPercView=document.getElementById('gPercView');
    const bPercView=document.getElementById('bPercView');

    function setFromCMYPercent(cP,mP,yP){
      const rP = 100 - clamp(cP,0,100);
      const gP = 100 - clamp(mP,0,100);
      const bP = 100 - clamp(yP,0,100);
      const r = percentToRgb(rP);
      const g = percentToRgb(gP);
      const b = percentToRgb(bP);
      setRGB(r,g,b);
    }

    function syncViews(){
      const rP=rgbToPercent(R), gP=rgbToPercent(G), bP=rgbToPercent(B);
      const cP=100-rP, mP=100-gP, yP=100-bP;
      if(cPerc2){ cPerc2.value=cP; cPercNum2.value=cP; }
      if(mPerc2){ mPerc2.value=mP; mPercNum2.value=mP; }
      if(yPerc2){ yPerc2.value=yP; yPercNum2.value=yP; }
      if(cRange255){ const cV = percentToRgb(cP); cRange255.value=cV; cNum255.value=cV; }
      if(mRange255){ const mV = percentToRgb(mP); mRange255.value=mV; mNum255.value=mV; }
      if(yRange255){ const yV = percentToRgb(yP); yRange255.value=yV; yNum255.value=yV; }
      rNumView && (rNumView.value=R); gNumView && (gNumView.value=G); bNumView && (bNumView.value=B);
      rPercView && (rPercView.value=rP); gPercView && (gPercView.value=gP); bPercView && (bPercView.value=bP);
    }

    [[cPerc2,cPercNum2,0],[mPerc2,mPercNum2,1],[yPerc2,yPercNum2,2]].forEach(([range,num,idx])=>{
      const handler = (src)=>()=>{ if(lock) return; const cmy=[cPerc2?.value, mPerc2?.value, yPerc2?.value].map(v=>+v||0); cmy[idx]=+src.value; setFromCMYPercent(cmy[0],cmy[1],cmy[2]); };
      range?.addEventListener('input', handler(range));
      num?.addEventListener('input', handler(num));
    });

    [[cRange255,cNum255,0],[mRange255,mNum255,1],[yRange255,yNum255,2]].forEach(([range,num,idx])=>{
      const handler = (src)=>()=>{ if(lock) return;
        const vals=[cRange255?.value, mRange255?.value, yRange255?.value].map(v=>+v||0);
        setFromCMYPercent(Math.round((vals[0]/255)*100), Math.round((vals[1]/255)*100), Math.round((vals[2]/255)*100));
      };
      range?.addEventListener('input', handler(range));
      num?.addEventListener('input', handler(num));
    });

    // Init
    setRGB(0,0,0);
    syncViews();
  </script>
</body>
</html>
